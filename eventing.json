{"appname":"poi","id":0,"depcfg":{"buckets":[{"alias":"db","bucket_name":"eventing"}],"metadata_bucket":"eventing","source_bucket":"travel-sample"},"appcode":"function OnUpdate(doc, meta) {\n    if (meta.id !== 'trigger') return;\n\n    let here = db['here'];\n    \n    let url = \"https://places.cit.api.here.com/places/v1/discover/around\";\n    \n    let data = `app_id=${here.id}&app_code=${here.code}&at=${doc.lat},${doc.lon}`;\n\n    let query = SELECT CURL($url, {\n        \"request\": \"GET\",\n        \"header\": [ \"Content-Type: application/json\", \"accept: application/json\" ],\n        \"data\": $data\n        }).results.items\n        AS poi;\n    \n    let response = query.execQuery();\n    \n    db['poi'] = response[0].poi;\n    \n    url = \"http://localhost:8080/events/poi\";\n    \n    data = JSON.stringify(response[0].poi);\n    \n    query = SELECT CURL($url, {\n        \"request\": \"POST\",\n        \"header\": [ \"Content-Type: application/json\", \"accept: application/json\" ],\n        \"data\": $data\n    });\n    \n    response = query.execQuery();\n}\n\nfunction OnDelete(meta) {\n}\n","settings":{"app_log_max_files":10,"app_log_max_size":10485760,"auto_swapper":true,"breakpad_on":true,"checkpoint_interval":10000,"cleanup_timers":false,"cpp_worker_thread_count":2,"cron_timers_per_doc":1000,"curl_timeout":500,"data_chan_size":10000,"dcp_gen_chan_size":10000,"dcp_num_connections":1,"dcp_stream_boundary":"from_now","deadline_timeout":3,"deployment_status":true,"description":"","enable_recursive_mutation":false,"enable_snapshot_smr":false,"execution_timeout":1,"feedback_batch_size":100,"feedback_read_buffer_size":65536,"fuzz_offset":0,"lcb_inst_capacity":5,"log_level":"TRACE","lss_cleaner_max_threshold":70,"lss_cleaner_threshold":30,"lss_read_ahead_size":1048576,"max_delta_chain_len":200,"max_page_items":400,"min_page_items":50,"persist_interval":5000,"processing_status":true,"skip_timer_threshold":86400,"sock_batch_size":100,"tick_duration":60000,"timer_processing_tick_interval":500,"use_memory_manager":true,"vb_ownership_giveup_routine_count":3,"vb_ownership_takeover_routine_count":3,"worker_count":3,"worker_feedback_queue_cap":10000,"worker_queue_cap":100000,"xattr_doc_timer_entry_prune_threshold":100}}